"use strict";var e=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function d(e){try{c(o.next(e))}catch(e){i(e)}}function u(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(d,u)}c((o=o.apply(e,t||[])).next())}))};const t=e=>{const t=document.querySelector(`[data-index="${e}"]`);return"o"===t.innerText?"nought":"×"===t.innerText?"cross":"empty"},n=()=>[[t("00"),t("01"),t("02")],[t("10"),t("11"),t("12")],[t("20"),t("21"),t("22")]],o=e=>{const t=document.querySelector("#message"),n=document.querySelector("#additional-info");"draw"===e?(t.innerText="It's a draw",n.innerText="At least I didn't lose"):(t.innerText=`Wow ${e} won`,n.innerText="aka me")},r=(e=n())=>{for(const t of["nought","cross"])if(e[0][0]===t&&e[0][1]===t&&e[0][2]===t||e[1][0]===t&&e[1][1]===t&&e[1][2]===t||e[2][0]===t&&e[2][1]===t&&e[2][2]===t||e[0][0]===t&&e[1][0]===t&&e[2][0]===t||e[0][1]===t&&e[1][1]===t&&e[2][1]===t||e[0][2]===t&&e[1][2]===t&&e[2][2]===t||e[0][0]===t&&e[1][1]===t&&e[2][2]===t||e[2][0]===t&&e[1][1]===t&&e[0][2]===t)return t;return e.map((e=>e.filter((e=>"empty"===e)).length)).every((e=>0===e))?"draw":null},i=e=>new Promise((t=>{setTimeout(t,e)})),d=(e,t)=>{let n=0;return e.forEach((e=>{e===t&&n++})),n>=2},u=(t,o=n())=>e(void 0,void 0,void 0,(function*(){const e="nought"===t?"cross":"nought",n=[[o[0][0],o[0][1],o[0][2],0],[o[1][0],o[1][1],o[1][2],1],[o[2][0],o[2][1],o[2][2],2]];for(const o of n)if(d(o,t)&&!o.includes(e)){const e=o.indexOf("empty");if(-1!==e)return`${o[3]}${e}`}const r=[[o[0][0],o[1][0],o[2][0],0],[o[0][1],o[1][1],o[2][1],1],[o[0][2],o[1][2],o[2][2],2]];for(const n of r)if(d(n,t)&&!n.includes(e)){const e=n.indexOf("empty");if(-1!==e)return`${e}${n[3]}`}const i=[[o[0][0],o[1][1],o[2][2],0],[o[2][0],o[1][1],o[0][2],1]];for(const n of i)if(d(n,t)&&!n.includes(e)){const e=n.indexOf("empty");if(-1!==e)return 0===e?0===n[3]?"00":"20":2===e?0===n[3]?"22":"02":"11"}return null})),c=(t,o=n())=>e(void 0,void 0,void 0,(function*(){const e=yield u(t,o),n="nought"===t?"cross":"nought";return!!e&&(o[parseInt(e[0])][parseInt(e[1])]=n,Boolean(yield u(t,o)))})),s=(t,o=n())=>e(void 0,void 0,void 0,(function*(){if(yield c(t,o)){let e=1;const n="nought"===t?"cross":"nought",r=yield u(t,o);return r?(e++,o[parseInt(r[0])][parseInt(r[1])]=n,e+(yield s(t,o))):1}return 0})),l=e=>{let t,n,o=e.length;for(;0!==o;)t=Math.floor(Math.random()*o),o--,n=e[o],e[o]=e[t],e[t]=n;return e},a=(t,o,r=n())=>e(void 0,void 0,void 0,(function*(){var e;const d=document.querySelector("#message"),a=document.querySelector("#additional-info"),y="nought"===t?"cross":"nought",f="nought"===t?"o":"×";d.innerText=("nought"===t?"noughts":"crosses")+" go",a.innerText=`Actually I already knew where I was going to go as soon as ${y} put their ${y} wherever but I have a ${o}ms timeout to make this look more realistic`;const m=null!==(e=yield u(t))&&void 0!==e?e:yield u(y);if(m){const e=document.querySelector(`[data-index="${m}"]`);return yield i(o),void(e.textContent=f)}const p=[];for(const[e,o]of r.entries())for(const[r,i]of o.entries()){if("empty"!==i)continue;const o=n();o[e][r]=t,(yield c(t,o))&&p.push({columnNumber:e,boxNumber:r,forkDepth:yield s(t,o)})}if(p.length>0){const e=p.sort(((e,t)=>e.forkDepth>t.forkDepth?-1:t.forkDepth>e.forkDepth?1:0))[0],t=document.querySelector(`[data-index="${e.columnNumber}${e.boxNumber}"]`);return yield i(o),void(t.textContent=f)}const x=[];for(const[e,o]of r.entries())for(const[r,i]of o.entries()){if("empty"!==i)continue;const o=n();o[e][r]=t,(yield c(y,o))&&x.push({columnNumber:e,boxNumber:r,forkDepth:yield s(y,o)})}if(x.length>0){const e=x.sort(((e,t)=>e.forkDepth>t.forkDepth?-1:t.forkDepth>e.forkDepth?1:0))[0],t=document.querySelector(`[data-index="${e.columnNumber}${e.boxNumber}"]`);return yield i(o),void(t.textContent=f)}for(const[e,d]of r.entries())for(const[r,c]of d.entries()){if("empty"!==c)continue;const d=n();d[e][r]=t;if(yield u(t,d)){if(0===(yield s(y,d))){const t=document.querySelector(`[data-index="${e}${r}"]`);return yield i(o),void(t.textContent=f)}}}if("empty"===r[1][1]){const e=document.querySelector('[data-index="11"]');return yield i(o),void(e.textContent=f)}if(r[0][0]===y&&"empty"===r[2][2]){const e=document.querySelector('[data-index="22"]');return yield i(o),void(e.textContent=f)}if(r[2][0]===y&&"empty"===r[0][2]){const e=document.querySelector('[data-index="02"]');return yield i(o),void(e.textContent=f)}if(r[0][2]===y&&"empty"===r[2][0]){const e=document.querySelector('[data-index="20"]');return yield i(o),void(e.textContent=f)}if(r[2][2]===y&&"empty"===r[0][0]){const e=document.querySelector('[data-index="00"]');return yield i(o),void(e.textContent=f)}const v=l(["00","20","02","22"]);if("empty"===r[parseInt(v[0][0])][parseInt(v[0][1])]){const e=document.querySelector(`[data-index="${v[0]}"]`);return yield i(o),void(e.textContent=f)}if("empty"===r[parseInt(v[1][0])][parseInt(v[1][1])]){const e=document.querySelector(`[data-index="${v[1]}"]`);return yield i(o),void(e.textContent=f)}if("empty"===r[parseInt(v[2][0])][parseInt(v[2][1])]){const e=document.querySelector(`[data-index="${v[2]}"]`);return yield i(o),void(e.textContent=f)}if("empty"===r[parseInt(v[3][0])][parseInt(v[3][1])]){const e=document.querySelector(`[data-index="${v[3]}"]`);return yield i(o),void(e.textContent=f)}const h=l(["01","12","21","10"]);if("empty"===r[parseInt(h[0][0])][parseInt(h[0][1])]){const e=document.querySelector(`[data-index="${h[0]}"]`);return yield i(o),void(e.textContent=f)}if("empty"===r[parseInt(h[1][0])][parseInt(h[1][1])]){const e=document.querySelector(`[data-index="${h[1]}"]`);return yield i(o),void(e.textContent=f)}if("empty"===r[parseInt(h[2][0])][parseInt(h[2][1])]){const e=document.querySelector(`[data-index="${h[2]}"]`);return yield i(o),void(e.textContent=f)}if("empty"===r[parseInt(h[3][0])][parseInt(h[3][1])]){const e=document.querySelector(`[data-index="${h[3]}"]`);return yield i(o),void(e.textContent=f)}})),y=()=>e(void 0,void 0,void 0,(function*(){let e=r();e?o(e):(yield a("cross",document.querySelector("#speed-slider").valueAsNumber),e=r(),e?o(e):(yield a("nought",document.querySelector("#speed-slider").valueAsNumber),yield y()))}));window.onload=()=>{var e;null===(e=document.querySelector("#speed-slider"))||void 0===e||e.addEventListener("input",(()=>{var e,t;document.querySelector("#speed-info").innerText=(null!==(t=null===(e=document.querySelector("#speed-slider"))||void 0===e?void 0:e.valueAsNumber)&&void 0!==t?t:0)/1e3+" seconds"})),y()};
//# sourceMappingURL=index.min.js.map